제시해주신 내용을 바탕으로 **Next.js + Supabase** 기반의 **'지역 기반 감정 동기화 플랫폼 - 무드캐스트(MoodCast)'** 제품 명세서를 작성했습니다.

이 프로젝트의 핵심은 **"단순한 참여"**와 **"직관적이고 개인화된 의미부여"**입니다.

---

# 📋 프로젝트 명세서: 무드캐스트 (MoodCast)

## 1. 프로젝트 개요

* **목적:** 사용자의 기분 데이터를 수집하여 지역별/성별 감정 기류를 시각화하고, 사용자에게 직관적인 행동 가이드(의미부여) 제공.
* **핵심 가치:** 2-클릭의 간결함, 데이터 기반의 위트 있는 분석, 지역적 유대감.

## 2. 기술 스택

* **Framework:** Next.js (App Router)
* **Database/Auth:** Supabase (PostgreSQL, Realtime)
* **State Management:** LocalStorage & Cookies (중복 투표 방지 및 사용자 세션 유지)
* **Styling:** Tailwind CSS + Framer Motion (부드러운 UX 애니메이션)
* **Map:** React-Kakao-Maps-SDK 또는 Leaflet (지역별 데이터 시각화)

---

## 3. 유저 시나리오 및 UI/UX 설계

### ① 진입 및 참여 (The 2-Click Journey)

* **랜딩 페이지:** "지금 [서울시 마포구]의 기류에 동기화하시겠습니까?" 문구와 함께 시작.
* **Nudge (생각 유도):** 버튼 클릭 전, "당신의 오늘 하루는 정말 어땠나요?"라는 문구와 함께 0.8초간의 미세한 페이드인 효과를 주어 무지성 클릭을 방지.
* **Step 1:** 성별 선택 (남/여)
* **Step 2:** 기분 선택 (좋음/나쁨) -> **투표 완료 및 결과 자동 전환**

### ② 결과 화면 (Main Dashboard)

* **직관적 분석:** "오늘 마포구 남자들은 다들 화가 나 있네요. 말 한마디도 조심하는 게 상책!" (사용자별 랜덤/조건별 텍스트 출력)
* **감정 기후 지도:** 현재 내 주변 지역의 좋음/나쁨 비중을 색상(예: 맑음-블루, 흐림-오렌지)으로 표현.
* **참여 추적:** Cookie/LocalStorage를 확인하여 이미 참여한 유저는 투표 단계를 건너뛰고 바로 대시보드로 진입.

### ③ 데이터 심화 및 히스토리 (Advanced View)

* **타임라인 분석:** "지난주 화요일엔 이 지역 기분이 최고였어요!" 같은 과거 데이터 대조.
* **통계 테이블:** 성별/기분 교차 분석표, 시간대별 감정 변화 추이 그래프.

---

## 4. 데이터베이스 스키마 (Supabase)

### Table: `mood_votes`

| Column | Type | Description |
| --- | --- | --- |
| `id` | UUID | 기본 키 (PK) |
| `created_at` | Timestamp | 투표 시간 (기본값: now()) |
| `gender` | Text | 'male' / 'female' |
| `mood` | Text | 'good' / 'bad' |
| `region_lv1` | Text | 시/도 (예: 서울특별시) |
| `region_lv2` | Text | 구/군 (예: 강남구) |
| `ip_hash` | Text | 중복 방지를 위한 IP 해시값 |
| `lat / lng` | Float | 위도 / 경도 (지도 표시용) |

---

## 5. 핵심 로직 상세

### [1] 위치 정보 수집 (Location Logic)

1. **Browser Geolocation:** 사용자 승인 시 정확한 좌표 획득.
2. **IP Reverse Geocoding:** GPS 거부 시, 서버 사이드에서 IP를 통해 대략적인 지역(City/Region) 추출.

### [2] 개인화된 한 줄 분석 (Personalized Analysis)

* **로직 예시:** * 내 기분(Bad) + 지역 평균(Good) = "모두가 웃을 때 나만 비가 오네요. 하지만 내일은 무지개가 뜰 거예요."
* 내 기분(Good) + 지역 평균(Bad) = "당신은 오늘 이 삭막한 지역의 유일한 산소호흡기입니다."


* **구현:** 약 50여 개의 템플릿 문구 배열에서 조건에 맞는 문구를 랜덤하게 매칭.

### [3] 중복 투표 방지 (Anti-Abuse)

* **1차:** LocalStorage에 `last_vote_date` 저장.
* **2차:** 브라우저 쿠키(HttpOnly) 활용.
* **3차:** DB 단에서 동일 IP의 24시간 내 투표 제한 로직.

---

## 6. 기능 고도화 계획 (Future Scope)

* **실시간 동기화:** Supabase Realtime을 사용해 누군가 투표할 때마다 지도의 색상이 실시간으로 울렁이는 효과.
* **감정 예보:** 과거 데이터를 기반으로 "내일 오후 2시쯤엔 마포구 분위기가 좋아질 예정입니다" 같은 예측 기능.
